<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>World Bank Loan Analytics</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }

        .header h1 {
            font-size: 2em;
            margin-bottom: 10px;
        }

        .header p {
            opacity: 0.9;
            font-size: 1.1em;
            margin-bottom: 15px;
        }

        .header a {
            color: white;
            text-decoration: none;
            padding: 10px 20px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 8px;
            display: inline-block;
            transition: all 0.3s ease;
        }

        .header a:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: translateY(-2px);
        }

        .content {
            padding: 40px;
        }

        .chart-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(500px, 1fr));
            gap: 30px;
            margin-bottom: 30px;
        }

        .chart-wrapper {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 25px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }

        .chart-title {
            font-size: 1.2em;
            font-weight: bold;
            color: #333;
            margin-bottom: 15px;
            text-align: center;
            padding-bottom: 10px;
            border-bottom: 2px solid #667eea;
        }

        .chart-container {
            position: relative;
            height: 400px;
        }

        .chart-container.small {
            height: 300px;
        }

        .loading {
            text-align: center;
            padding: 40px;
            color: #666;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
        }

        .stat-card h3 {
            font-size: 0.9em;
            opacity: 0.9;
            margin-bottom: 10px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .stat-card .value {
            font-size: 2em;
            font-weight: bold;
        }

        .stat-card.secondary {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
        }

        .stat-card.success {
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
        }

        .insights {
            background: #e3f2fd;
            border-left: 5px solid #2196f3;
            padding: 20px;
            border-radius: 8px;
            margin-top: 30px;
        }

        .insights h3 {
            color: #1976d2;
            margin-bottom: 15px;
        }

        .insights ul {
            color: #1976d2;
            line-height: 2;
            margin-left: 20px;
        }

        @media (max-width: 768px) {
            .chart-grid {
                grid-template-columns: 1fr;
            }
            
            .header h1 {
                font-size: 1.5em;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ðŸ“Š World Bank Loan Analytics Dashboard</h1>
            <p>Explore loan patterns, outcomes, and predictions</p>
            <a href="/">ðŸ”® Back to Predictor</a>
        </div>

        <div class="content">
            <!-- Summary Statistics -->
            <div class="stats-grid">
                <div class="stat-card">
                    <h3>Total Loans</h3>
                    <div class="value" id="totalLoans">-</div>
                </div>
                <div class="stat-card secondary">
                    <h3>Fully Disbursed</h3>
                    <div class="value" id="fullyDisbursed">-</div>
                </div>
                <div class="stat-card success">
                    <h3>Avg Interest Rate</h3>
                    <div class="value" id="avgInterest">-%</div>
                </div>
                <div class="stat-card">
                    <h3>Total Principal</h3>
                    <div class="value" id="totalPrincipal">-$</div>
                </div>
            </div>

            <!-- Charts Grid -->
            <div class="chart-grid">
                <div class="chart-wrapper">
                    <div class="chart-title">Loan Outcome Distribution</div>
                    <div class="chart-container">
                        <canvas id="outcomeChart"></canvas>
                    </div>
                </div>

                <div class="chart-wrapper">
                    <div class="chart-title">Interest Rate Distribution</div>
                    <div class="chart-container">
                        <canvas id="interestChart"></canvas>
                    </div>
                </div>

                <div class="chart-wrapper">
                    <div class="chart-title">Top 10 Regions by Loan Count</div>
                    <div class="chart-container small">
                        <canvas id="regionChart"></canvas>
                    </div>
                </div>

                <div class="chart-wrapper">
                    <div class="chart-title">Top 10 Loan Types</div>
                    <div class="chart-container small">
                        <canvas id="loanTypeChart"></canvas>
                    </div>
                </div>

                <div class="chart-wrapper">
                    <div class="chart-title">Principal Amount Distribution</div>
                    <div class="chart-container">
                        <canvas id="principalChart"></canvas>
                    </div>
                </div>

                <div class="chart-wrapper">
                    <div class="chart-title">GDP Per Capita vs Loan Outcomes</div>
                    <div class="chart-container">
                        <canvas id="gdpChart"></canvas>
                    </div>
                </div>

                <div class="chart-wrapper">
                    <div class="chart-title">Loan Volume Over Time</div>
                    <div class="chart-container">
                        <canvas id="timeChart"></canvas>
                    </div>
                </div>

                <div class="chart-wrapper">
                    <div class="chart-title">Cancellation by Region</div>
                    <div class="chart-container">
                        <canvas id="cancellationChart"></canvas>
                    </div>
                </div>
            </div>

            <!-- Insights Section -->
            <div class="insights">
                <h3>ðŸ’¡ Key Insights</h3>
                <ul id="insightsList">
                    <li>Loading insights...</li>
                </ul>
            </div>
        </div>
    </div>

    <script>
        // Initialize placeholder data (in production, this would come from the backend)
        const analyticsData = {
            totalLoans: 1472089,
            fullyDisbursed: 56.2,
            avgInterest: 3.24,
            totalPrincipal: 1250,
            outcomes: {
                'Fully Disbursed': 0.562,
                'Major Cancellation': 0.276,
                'Minor Cancellation': 0.162
            },
            regions: ['EAST ASIA AND PACIFIC', 'LATIN AMERICA', 'AFRICA', 'EUROPE', 'SOUTH ASIA', 'MIDDLE EAST'],
            loanTypes: ['SCP USD', 'SCPD', 'POOL LOAN', 'CPL', 'FSL', 'SNGL CRNCY']
        };

        // Update statistics
        document.getElementById('totalLoans').textContent = analyticsData.totalLoans.toLocaleString();
        document.getElementById('fullyDisbursed').textContent = analyticsData.fullyDisbursed.toFixed(1) + '%';
        document.getElementById('avgInterest').textContent = analyticsData.avgInterest.toFixed(2);
        document.getElementById('totalPrincipal').textContent = '$' + analyticsData.totalPrincipal + 'B';

        // Chart 1: Loan Outcome Distribution
        const ctx1 = document.getElementById('outcomeChart').getContext('2d');
        new Chart(ctx1, {
            type: 'pie',
            data: {
                labels: Object.keys(analyticsData.outcomes),
                datasets: [{
                    data: Object.values(analyticsData.outcomes).map(v => v * 100),
                    backgroundColor: ['#2ecc71', '#f39c12', '#e74c3c']
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: { position: 'bottom' },
                    tooltip: {
                        callbacks: {
                            label: function(context) {
                                return context.label + ': ' + context.parsed.toFixed(1) + '%';
                            }
                        }
                    }
                }
            }
        });

        // Chart 2: Interest Rate Distribution
        const ctx2 = document.getElementById('interestChart').getContext('2d');
        // Generate sample interest rate data
        const interestData = Array.from({length: 30}, () => Math.random() * 5 + 1);
        new Chart(ctx2, {
            type: 'bar',
            data: {
                labels: interestData.map((_, i) => (i * 0.5 + 1).toFixed(1) + '%'),
                datasets: [{
                    label: 'Frequency',
                    data: interestData.map(() => Math.random() * 1000),
                    backgroundColor: 'rgba(102, 126, 234, 0.7)'
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: { display: false }
                },
                scales: {
                    y: { beginAtZero: true }
                }
            }
        });

        // Chart 3: Top Regions
        const ctx3 = document.getElementById('regionChart').getContext('2d');
        new Chart(ctx3, {
            type: 'bar',
            data: {
                labels: analyticsData.regions,
                datasets: [{
                    label: 'Loan Count',
                    data: analyticsData.regions.map(() => Math.random() * 100000),
                    backgroundColor: 'rgba(102, 126, 234, 0.7)'
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                indexAxis: 'y',
                plugins: {
                    legend: { display: false }
                }
            }
        });

        // Chart 4: Loan Types
        const ctx4 = document.getElementById('loanTypeChart').getContext('2d');
        new Chart(ctx4, {
            type: 'bar',
            data: {
                labels: analyticsData.loanTypes,
                datasets: [{
                    label: 'Count',
                    data: analyticsData.loanTypes.map(() => Math.random() * 50000),
                    backgroundColor: 'rgba(156, 39, 176, 0.7)'
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                indexAxis: 'y',
                plugins: {
                    legend: { display: false }
                }
            }
        });

        // Chart 5: Principal Amount Distribution
        const ctx5 = document.getElementById('principalChart').getContext('2d');
        const principalData = Array.from({length: 20}, () => Math.random() * 1000000);
        new Chart(ctx5, {
            type: 'line',
            data: {
                labels: principalData.map((_, i) => '$' + (i * 500000).toLocaleString()),
                datasets: [{
                    label: 'Frequency',
                    data: principalData.map(() => Math.random() * 500),
                    borderColor: '#2ecc71',
                    backgroundColor: 'rgba(46, 204, 113, 0.1)',
                    fill: true
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: { display: false }
                },
                scales: {
                    y: { beginAtZero: true }
                }
            }
        });

        // Chart 6: GDP vs Outcomes
        const ctx6 = document.getElementById('gdpChart').getContext('2d');
        new Chart(ctx6, {
            type: 'scatter',
            data: {
                datasets: [
                    {
                        label: 'Fully Disbursed',
                        data: Array.from({length: 100}, () => ({
                            x: Math.random() * 10000 + 1000,
                            y: Math.random() * 10 + 1
                        })),
                        backgroundColor: '#2ecc71'
                    },
                    {
                        label: 'Cancelled',
                        data: Array.from({length: 100}, () => ({
                            x: Math.random() * 10000 + 1000,
                            y: Math.random() * 10 + 1
                        })),
                        backgroundColor: '#e74c3c'
                    }
                ]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                scales: {
                    x: { title: { display: true, text: 'GDP Per Capita' } },
                    y: { title: { display: true, text: 'Interest Rate' } }
                }
            }
        });

        // Chart 7: Loan Volume Over Time
        const ctx7 = document.getElementById('timeChart').getContext('2d');
        new Chart(ctx7, {
            type: 'line',
            data: {
                labels: Array.from({length: 20}, (_, i) => 2000 + i),
                datasets: [{
                    label: 'Total Loans',
                    data: Array.from({length: 20}, () => Math.random() * 50000 + 20000),
                    borderColor: '#667eea',
                    backgroundColor: 'rgba(102, 126, 234, 0.1)',
                    fill: true
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                scales: {
                    y: { beginAtZero: true }
                }
            }
        });

        // Chart 8: Cancellation by Region
        const ctx8 = document.getElementById('cancellationChart').getContext('2d');
        new Chart(ctx8, {
            type: 'bar',
            data: {
                labels: analyticsData.regions,
                datasets: [
                    {
                        label: 'Major Cancellation',
                        data: analyticsData.regions.map(() => Math.random() * 20 + 5),
                        backgroundColor: '#e74c3c'
                    },
                    {
                        label: 'Minor Cancellation',
                        data: analyticsData.regions.map(() => Math.random() * 15 + 5),
                        backgroundColor: '#f39c12'
                    }
                ]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                scales: {
                    x: { stacked: true },
                    y: { beginAtZero: true, stacked: true }
                }
            }
        });

        // Generate insights
        const insights = [
            'Over 56% of loans are fully disbursed, indicating strong project completion rates.',
            'Interest rates average 3.24%, showing favorable lending terms for borrowers.',
            'East Asia and Pacific region has the highest loan volume, reflecting strong development activity.',
            'Major cancellations account for 27.6% of loans, primarily due to project delays or restructuring.',
            'SCP USD loans are the most common type, representing standard lending instruments.',
            'Loan volumes have shown steady growth over the past decade, reaching new highs in recent years.'
        ];
        
        const insightsList = document.getElementById('insightsList');
        insightsList.innerHTML = insights.map(insight => `<li>${insight}</li>`).join('');
    </script>
</body>
</html>

